import{q as p,H as v,I as _,J as m,K as B,j as P,g as b,L as x,M as w,N as j}from"./entry.f1cc57f8.js";const k=()=>null;function H(...s){const c=typeof s[s.length-1]=="string"?s.pop():void 0;typeof s[0]!="string"&&s.unshift(c);let[t,l,n={}]=s;if(typeof t!="string")throw new TypeError("[nuxt] [asyncData] key must be a string.");if(typeof l!="function")throw new TypeError("[nuxt] [asyncData] handler must be a function.");n.server=n.server??!0,n.default=n.default??k,n.lazy=n.lazy??!1,n.immediate=n.immediate??!0;const e=P(),f=()=>e.isHydrating?e.payload.data[t]:e.static.data[t],d=()=>f()!==void 0;e._asyncData[t]||(e._asyncData[t]={data:p(f()??n.default()),pending:p(!d()),error:v(e.payload._errors,t),status:p("idle")});const a={...e._asyncData[t]};a.refresh=a.execute=(i={})=>{if(e._asyncDataPromises[t]){if(i.dedupe===!1)return e._asyncDataPromises[t];e._asyncDataPromises[t].cancelled=!0}if((i._initial||e.isHydrating&&i._initial!==!1)&&d())return f();a.pending.value=!0,a.status.value="pending";const u=new Promise((r,o)=>{try{r(l(e))}catch(g){o(g)}}).then(r=>{if(u.cancelled)return e._asyncDataPromises[t];let o=r;n.transform&&(o=n.transform(r)),n.pick&&(o=A(o,n.pick)),a.data.value=o,a.error.value=null,a.status.value="success"}).catch(r=>{if(u.cancelled)return e._asyncDataPromises[t];a.error.value=r,a.data.value=b(n.default()),a.status.value="error"}).finally(()=>{u.cancelled||(a.pending.value=!1,e.payload.data[t]=a.data.value,a.error.value&&(e.payload._errors[t]=x(a.error.value)),delete e._asyncDataPromises[t])});return e._asyncDataPromises[t]=u,e._asyncDataPromises[t]};const y=()=>a.refresh({_initial:!0}),D=n.server!==!1&&e.payload.serverRendered;{const i=w();if(i&&!i._nuxtOnBeforeMountCbs){i._nuxtOnBeforeMountCbs=[];const r=i._nuxtOnBeforeMountCbs;i&&(_(()=>{r.forEach(o=>{o()}),r.splice(0,r.length)}),m(()=>r.splice(0,r.length)))}D&&e.isHydrating&&d()?(a.pending.value=!1,a.status.value=a.error.value?"error":"success"):i&&(e.payload.serverRendered&&e.isHydrating||n.lazy)&&n.immediate?i._nuxtOnBeforeMountCbs.push(y):n.immediate&&y(),n.watch&&B(n.watch,()=>a.refresh());const u=e.hook("app:data:refresh",r=>{if(!r||r.includes(t))return a.refresh()});i&&m(u)}const h=Promise.resolve(e._asyncDataPromises[t]).then(()=>a);return Object.assign(h,a),h}function A(s,c){const t={};for(const l of c)t[l]=s[l];return t}const M=j("main",{state:()=>({notionDB:null,notionPage:{}}),actions:{async fetchNotionDB(){const s=await $fetch("https://api.notion.com/v1/databases/5ad9018ec1a9408cbc7781197832c880/query",{method:"POST",credentials:"include",headers:{Accept:"application/json",Authorization:"Bearer secret_8Ujk50jsgGBNH8x1D8pi3DKB1ppeIRHAs9XNdMCoyog"}});return s&&(this.notionDB=s),s},async fetchNotionPage(s){const c=await $fetch(`https://api.notion.com/v1/blocks/${s}/children?page_size=999`,{method:"GET",credentials:"include",headers:{Accept:"application/json",Authorization:"Bearer secret_8Ujk50jsgGBNH8x1D8pi3DKB1ppeIRHAs9XNdMCoyog"}});return c&&(this.notionPage=c),c}},getters:{getDBItemArr(){var s;if(this.notionDB)return(s=this.notionDB)==null?void 0:s.results}}});export{H as a,M as u};
