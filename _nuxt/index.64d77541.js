import{k as p,L as w,M as x,N as g,m as B,y as k,h as P,O as C,P as N,_ as j,o as A,c as M,a as u,s as m,Q as O}from"./entry.df5e1816.js";const H=()=>null;function F(...e){const n=typeof e[e.length-1]=="string"?e.pop():void 0;typeof e[0]!="string"&&e.unshift(n);let[t,i,r={}]=e;if(typeof t!="string")throw new TypeError("[nuxt] [asyncData] key must be a string.");if(typeof i!="function")throw new TypeError("[nuxt] [asyncData] handler must be a function.");r.server=r.server??!0,r.default=r.default??H,r.lazy=r.lazy??!1,r.immediate=r.immediate??!0;const s=k(),c=()=>s.isHydrating?s.payload.data[t]:s.static.data[t],h=()=>c()!==void 0;s._asyncData[t]||(s._asyncData[t]={data:p(c()??r.default()),pending:p(!h()),error:w(s.payload._errors,t),status:p("idle")});const a={...s._asyncData[t]};a.refresh=a.execute=(l={})=>{if(s._asyncDataPromises[t]){if(l.dedupe===!1)return s._asyncDataPromises[t];s._asyncDataPromises[t].cancelled=!0}if((l._initial||s.isHydrating&&l._initial!==!1)&&h())return c();a.pending.value=!0,a.status.value="pending";const f=new Promise((o,d)=>{try{o(i(s))}catch(D){d(D)}}).then(o=>{if(f.cancelled)return s._asyncDataPromises[t];let d=o;r.transform&&(d=r.transform(o)),r.pick&&(d=S(d,r.pick)),a.data.value=d,a.error.value=null,a.status.value="success"}).catch(o=>{if(f.cancelled)return s._asyncDataPromises[t];a.error.value=o,a.data.value=P(r.default()),a.status.value="error"}).finally(()=>{f.cancelled||(a.pending.value=!1,s.payload.data[t]=a.data.value,a.error.value&&(s.payload._errors[t]=C(a.error.value)),delete s._asyncDataPromises[t])});return s._asyncDataPromises[t]=f,s._asyncDataPromises[t]};const _=()=>a.refresh({_initial:!0}),b=r.server!==!1&&s.payload.serverRendered;{const l=N();if(l&&!l._nuxtOnBeforeMountCbs){l._nuxtOnBeforeMountCbs=[];const o=l._nuxtOnBeforeMountCbs;l&&(x(()=>{o.forEach(d=>{d()}),o.splice(0,o.length)}),g(()=>o.splice(0,o.length)))}b&&s.isHydrating&&h()?(a.pending.value=!1,a.status.value=a.error.value?"error":"success"):l&&(s.payload.serverRendered&&s.isHydrating||r.lazy)&&r.immediate?l._nuxtOnBeforeMountCbs.push(_):r.immediate&&_(),r.watch&&B(r.watch,()=>a.refresh());const f=s.hook("app:data:refresh",o=>{if(!o||o.includes(t))return a.refresh()});l&&g(f)}const y=Promise.resolve(s._asyncDataPromises[t]).then(()=>a);return Object.assign(y,a),y}function S(e,n){const t={};for(const i of n)t[i]=e[i];return t}const T={},E={class:"relative w-full h-full moving-container"},$=u("div",{class:"absolute w-full h-full scale-105"},[u("svg",{width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg"},[u("rect",{class:"moving-dashed-border",width:"100%",height:"100%",fill:"none",stroke:"#fcba03","stroke-width":"25","stroke-dasharray":"15% 185%","stroke-dashoffset":"5%","stroke-linecap":"square"})])],-1),z=u("div",{class:"absolute w-full max-w-128 h-full bg-black moving-bg"},null,-1),R={class:"max-w-128 relative min-h-[16rem] h-full w-full text-left bg-white border-2 border-black border-solid shadow-md"},G={id:"image-container",class:"relative w-full pb-[56.25%] overflow-hidden border-0 border-solid border-b-1"},K={class:"p-4"},U={class:"mb-2 line-clamp-2 font-bold text-black text-base tracking-wide"};function q(e,n){return A(),M("div",E,[$,z,u("div",R,[u("div",G,[m(e.$slots,"cover")]),u("div",K,[u("div",U,[m(e.$slots,"title")]),m(e.$slots,"tags")])])])}const I=j(T,[["render",q]]),L=e=>{var t,i;const n=(i=(t=e==null?void 0:e.properties)==null?void 0:t.Cover)==null?void 0:i.files.map(r=>r.external.url);return n?n[0]:void 0},Q=e=>{var n,t;return((t=(n=e==null?void 0:e.properties)==null?void 0:n.Name)==null?void 0:t.title.map(i=>i.plain_text).join(""))||""},v=e=>{var n,t;return(t=(n=e==null?void 0:e.properties)==null?void 0:n.Tags)==null?void 0:t.multi_select.map(i=>i.id)},V=O("main",{state:()=>({notionDB:null,notionPage:null}),actions:{async fetchNotionDB(){const e=await $fetch("https://api.notion.com/v1/databases/5ad9018ec1a9408cbc7781197832c880/query",{method:"POST",credentials:"include",headers:{Accept:"application/json",Authorization:"Bearer secret_8Ujk50jsgGBNH8x1D8pi3DKB1ppeIRHAs9XNdMCoyog"},body:{sorts:[{property:"Sort",direction:"ascending"}]}});return e&&(this.notionDB=e),e},async fetchNotionPage(e){const n=await $fetch(`https://api.notion.com/v1/pages/${e}`,{method:"GET",credentials:"include",headers:{Accept:"application/json",Authorization:"Bearer secret_8Ujk50jsgGBNH8x1D8pi3DKB1ppeIRHAs9XNdMCoyog"}});return n&&(this.notionPage=n),n}},getters:{getDBItemArr(){var e;if(this.notionDB)return(e=this.notionDB)==null?void 0:e.results},getSimilarItems(){var e,n;if(this.notionDB&&this.notionPage){const t=v(this.notionPage);return((n=(e=this.notionDB)==null?void 0:e.results)==null?void 0:n.map(s=>{const c=v(s),h=(c==null?void 0:c.filter(a=>t==null?void 0:t.includes(a)).length)||0;return{item:s,score:h}})).sort((s,c)=>c.score-s.score).filter(s=>{var c;return s.item.id!==((c=this.notionPage)==null?void 0:c.id)}).map(s=>s.item).slice(0,3)}return[]}}});export{I as _,F as a,Q as b,L as g,V as u};
