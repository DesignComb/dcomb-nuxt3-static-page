import{r as m,M as D,N as B,O as x,P,y as j,k as $,Q as k,R as C,_ as T,o as N,c as A,a as p,s as v,S as H}from"./entry.e99a7f04.js";const M=()=>null;function J(...e){const t=typeof e[e.length-1]=="string"?e.pop():void 0;typeof e[0]!="string"&&e.unshift(t);let[a,o,n={}]=e;if(typeof a!="string")throw new TypeError("[nuxt] [asyncData] key must be a string.");if(typeof o!="function")throw new TypeError("[nuxt] [asyncData] handler must be a function.");n.server=n.server??!0,n.default=n.default??M,n.lazy=n.lazy??!1,n.immediate=n.immediate??!0;const r=j(),c=()=>r.isHydrating?r.payload.data[a]:r.static.data[a],d=()=>c()!==void 0;r._asyncData[a]||(r._asyncData[a]={data:m(c()??n.default()),pending:m(!d()),error:D(r.payload._errors,a),status:m("idle")});const s={...r._asyncData[a]};s.refresh=s.execute=(l={})=>{if(r._asyncDataPromises[a]){if(l.dedupe===!1)return r._asyncDataPromises[a];r._asyncDataPromises[a].cancelled=!0}if((l._initial||r.isHydrating&&l._initial!==!1)&&d())return c();s.pending.value=!0,s.status.value="pending";const h=new Promise((i,f)=>{try{i(o(r))}catch(w){f(w)}}).then(i=>{if(h.cancelled)return r._asyncDataPromises[a];let f=i;n.transform&&(f=n.transform(i)),n.pick&&(f=O(f,n.pick)),s.data.value=f,s.error.value=null,s.status.value="success"}).catch(i=>{if(h.cancelled)return r._asyncDataPromises[a];s.error.value=i,s.data.value=$(n.default()),s.status.value="error"}).finally(()=>{h.cancelled||(s.pending.value=!1,r.payload.data[a]=s.data.value,s.error.value&&(r.payload._errors[a]=k(s.error.value)),delete r._asyncDataPromises[a])});return r._asyncDataPromises[a]=h,r._asyncDataPromises[a]};const g=()=>s.refresh({_initial:!0}),_=n.server!==!1&&r.payload.serverRendered;{const l=C();if(l&&!l._nuxtOnBeforeMountCbs){l._nuxtOnBeforeMountCbs=[];const i=l._nuxtOnBeforeMountCbs;l&&(B(()=>{i.forEach(f=>{f()}),i.splice(0,i.length)}),x(()=>i.splice(0,i.length)))}_&&r.isHydrating&&d()?(s.pending.value=!1,s.status.value=s.error.value?"error":"success"):l&&(r.payload.serverRendered&&r.isHydrating||n.lazy)&&n.immediate?l._nuxtOnBeforeMountCbs.push(g):n.immediate&&g(),n.watch&&P(n.watch,()=>s.refresh());const h=r.hook("app:data:refresh",i=>{if(!i||i.includes(a))return s.refresh()});l&&x(h)}const y=Promise.resolve(r._asyncDataPromises[a]).then(()=>s);return Object.assign(y,s),y}function O(e,t){const a={};for(const o of t)a[o]=e[o];return a}const S={},z={class:"relative w-full h-full moving-container"},E=p("div",{class:"absolute w-full h-full scale-105"},[p("svg",{width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg"},[p("rect",{class:"moving-dashed-border",width:"100%",height:"100%",fill:"none",stroke:"#fcba03","stroke-width":"4","stroke-dasharray":"150","stroke-dashoffset":"0","stroke-linecap":"square"})])],-1),R=p("div",{class:"absolute w-full max-w-128 h-full bg-black moving-bg"},null,-1),q={class:"max-w-128 relative min-h-[16rem] h-full w-full text-left bg-white border-2 border-black border-solid shadow-md"},G={id:"image-container",class:"relative w-full pb-[56.25%] overflow-hidden border-0 border-solid border-b-1"},K={class:"p-4"},U={class:"mb-2 line-clamp-2 font-bold text-black text-base tracking-wide"};function X(e,t){return N(),A("div",z,[E,R,p("div",q,[p("div",G,[v(e.$slots,"cover")]),p("div",K,[p("div",U,[v(e.$slots,"title")]),v(e.$slots,"tags")])])])}const L=T(S,[["render",X]]),Q=e=>{var t,a,o,n,r,c,d,s,g,_;return e!=null&&e.cover?e.cover.type==="external"?e.cover.external.url:e.cover.type==="file"?e.cover.file.url:"":(t=e==null?void 0:e.properties)!=null&&t.Cover&&((a=e.properties.Cover)==null?void 0:a.type)==="files"?((n=(o=e.properties.Cover)==null?void 0:o.files[0])==null?void 0:n.type)==="external"?(d=(c=(r=e.properties.Cover)==null?void 0:r.files[0])==null?void 0:c.external)==null?void 0:d.url:(_=(g=(s=e.properties.Cover)==null?void 0:s.files[0])==null?void 0:g.file)==null?void 0:_.url:""},V=e=>{var t,a;return((a=(t=e==null?void 0:e.properties)==null?void 0:t.ProjectImage)==null?void 0:a.files.map(o=>o.external.url))||[]},W=e=>{var t,a;return((a=(t=e==null?void 0:e.properties)==null?void 0:t.Name)==null?void 0:a.title.map(o=>o.plain_text).join(""))||""},Y=e=>{var t,a;return((a=(t=e==null?void 0:e.properties)==null?void 0:t.Text)==null?void 0:a.text.map(o=>o.plain_text.replace(/\n/g,"<br>")).join(""))||""},b=e=>{var t,a;return(a=(t=e==null?void 0:e.properties)==null?void 0:t.Tags)==null?void 0:a.multi_select.map(o=>o.id)};function u(e){let t=e.text.content;return e.annotations.bold&&(t=`<strong>${t}</strong>`),e.annotations.italic&&(t=`<em>${t}</em>`),e.annotations.strikethrough&&(t=`<del>${t}</del>`),e.annotations.underline&&(t=`<u>${t}</u>`),e.annotations.code&&(t=`<code>${t}</code>`),e.text.link&&(t=`<a href="${e.text.link}">${t}</a>`),t}function I(e){switch(e.type){case"heading_1":return`<h1>${e.heading_1.text.map(u).join("")}</h1>`;case"heading_2":return`<h2>${e.heading_2.text.map(u).join("")}</h2>`;case"heading_3":return`<h3>${e.heading_3.text.map(u).join("")}</h3>`;case"bulleted_list_item":return`<li>${e.bulleted_list_item.text.map(u).join("")}</li>`;case"numbered_list_item":return`<li>${e.numbered_list_item.text.map(u).join("")}</li>`;case"code":return`<pre><code>${e.code.text.map(u).join("")}</code></pre>`;case"quote":return`<blockquote>${e.quote.text.map(u).join("")}</blockquote>`;case"callout":return`<div class="callout">${e.callout.text.map(u).join("")}</div>`;case"paragraph":return`<p>${e.paragraph.text.map(u).join("")}</p>`;case"image":return`<div id="image-container" class="relative w-full pb-[56.25%] overflow-hidden">
                        <img src="${e.image.file.url}" alt=""/>
                    </div>`;default:return""}}const Z=H("main",{state:()=>({notionDB:null,notionPage:{},notionPageBlock:null}),actions:{async fetchNotionDB(){const e=await $fetch("https://api.notion.com/v1/databases/5ad9018ec1a9408cbc7781197832c880/query",{method:"POST",credentials:"include",headers:{Accept:"application/json",Authorization:"Bearer secret_8Ujk50jsgGBNH8x1D8pi3DKB1ppeIRHAs9XNdMCoyog"},body:{sorts:[{property:"Sort",direction:"ascending"}]}});return e&&(this.notionDB=e),e},async fetchNotionPage(e){const t=await $fetch(`https://api.notion.com/v1/pages/${e}`,{method:"GET",credentials:"include",headers:{Accept:"application/json",Authorization:"Bearer secret_8Ujk50jsgGBNH8x1D8pi3DKB1ppeIRHAs9XNdMCoyog"}});return t&&(this.notionPage=t),t},async fetchNotionPageBlock(e){const t=await $fetch(`https://api.notion.com/v1/blocks/${e}/children?page_size=999`,{method:"GET",credentials:"include",headers:{Accept:"application/json",Authorization:"Bearer secret_8Ujk50jsgGBNH8x1D8pi3DKB1ppeIRHAs9XNdMCoyog"}});return t&&(this.notionPageBlock=t),t}},getters:{getDBItemArr(){var e;if(this.notionDB)return(e=this.notionDB)==null?void 0:e.results},getNotionPageBlockHtml(){var e,t;return(t=(e=this.notionPageBlock)==null?void 0:e.results)==null?void 0:t.map(I).join("")},getSimilarItems(){var e,t;if(this.notionDB&&this.notionPage){const a=b(this.notionPage);return((t=(e=this.notionDB)==null?void 0:e.results)==null?void 0:t.map(r=>{const d=b(r).filter(s=>a.includes(s)).length;return{item:r,score:d}})).sort((r,c)=>c.score-r.score).filter(r=>r.item.id!==this.notionPage.id).map(r=>r.item).slice(0,3)}return[]}}});export{L as _,J as a,W as b,V as c,Y as d,Q as g,Z as u};
